---
- secret:
    name: SECRET_ANSIBLE_COLLECTION_COMMONS
    data:
      DTRACK_API_KEY: !encrypted/pkcs1-oaep
        - AfqOEWZm61F9JMuGNsUf40xDACXBiL53gPrMH5nXvrNmUNZaY3GZBl4evTnxmsaLP2wTN
          Ws6+9BPtlg0+pgUwSckTCidvy+bbndeJx3E5ojwHjlhkkn1QozTxBOMLdph1/A+ZrepTC
          Hg/rDREdE2mlaUkpYa1rkeUkxUfwQE4CBoY6k/NkxjgTq9ED589V/Q53jq8SXY+MuPkBi
          p6ulZ3mi/0JO4Njhe85dEstuKDLkU3K6o2sqHHk0g/9/iRjg2Web6lljxvGZ05Vqb3bd+
          6iEB5bAlB00U7rYAjRabR+jOB2t9tBHEtiK8o2JLTO/mm9/6VkBPVTf5dECGC3fNsH/YX
          N0n0wfzeNW3LLTCtYEXOeyioWf1seC80bmh7h1Fn2OO+KE2GMndVDTfk5/LI2dAwyd/bK
          hqfWJ8SD7wAZjiDQYVq/IIDJrA6Ti/hlPC8KXQDpkB9BsShuefrHgE0w3pmH+IpurSfg5
          hh6r/grYwq1805HiE+IAqHaGZnrcO897Kh5zwuzaFYb4Pd0byjV2W8jcBEjrybyvRIT1F
          M8quQXyPyqEQmaeZVcy9ivRZeT9rA47/+9tlOYMIMjsOKCD6ARnHspoZ/qVBozasH2LU/
          ok66F1le/IoQ/umHE2YXJDVTWYJHaottlCkFUeZwkXYTZ7hc4rw7nIs5dFRIUA=
      DOCKER_PASSWORD: !encrypted/pkcs1-oaep
        - OFHL2xpdly9VPy+yrPLc0eathf/MSoh3bF06Mjs0xgjeDRP5Koqvn3NmuZgZQPoV1iuj0
          L7JcqnjAaeHAN1vY3fkA1nlhpgDpO7Wp0wnS8Rjj1h5kYZ6JJygcMufbAMYFVXL2RCdD4
          4Gji+80d5LwdxS1oLe4gblIXRbfUU4p6wNqRdBD9YSnNs4yY7ly0X+KXkyjS+DVar1udg
          hHaSaUxDsf5wZvrLsPrWZ61D66JfDwgAcY9tmDIJDx3Fv+NxIYsTfIibLmdl2t9wK15L0
          tlgcO7Y0zH23zNAs58+2cJQRjOHy/91s4TiP7ggWqzBVLz+QvN0eybom4EbESt3vKZB+c
          31//e/nMLetM8p65ScznUFFI31A2LQYO9Ao6MrCipgsN1bVg+rATNC87L5cmrdi7zVMeC
          mxUu76E+TZ68LrUwh9uhqruxtJqioWMsW9EnapdBJgcVUm/bnCvAgwpJuLCrFdaR/hx6f
          Nz1aBJGAs/Ijfzo5/RUR3gAbzZKGoYhpMenAJdodV/mfn97Z9u/9xqPD+8+RIeWL55QYY
          6P8cF6FmPPdlGSjoZq1wK9MEAzKj2IQx0VZKVU3/t5JqhadrKPklRzeguDUo6n+/DvF+s
          MA+QzG1k5/BJW6mSTrXRD6AJA7S+6OOcbNtUpD5a9qSG4dXxr+/YRXwTJaYxlc=
      DOCKER_USERNAME: !encrypted/pkcs1-oaep
        - S89wZ+O7CybwJPqFK4GJi9+De8kUGba4usUpEZv3n+tkA8Ee7roLxteUoNrNxVXDnADM6
          vv5vM4vnFV48Jqo49Ik47Fk5MKfOCwaIstFevkwLfNO9YZMPhoPJMIvpzyhNsVhn0RnH5
          oxd/qthdQCGK3ZfgJtRE/doaQR8tqXbMD5fNJPzULgc2Mq5GtMJ3iSLqTqjBH34CvSn8I
          XFbvH3LObr3Oz19kmHJuD+V0Xu6wA/mDbLGi9PACnkssWeSpaMd0DLZbIPPCEMYkTdOOE
          mdW3bWVA030jxvGLa5OSdEGN9fbTZnIyyl2LN7YrM5zOArpLYEi0NBDrCMUgSLm644nEo
          jYVZnOzhjYP/Nmz1CoZc/DfltSjY4Tk5nlY45NyPMaBHzz3cZ2vd49JOjaqslxNK7t1GB
          Zs+Ctw3LtyyHau3Ug5ECj5bcrl4pAv08mR+GzHS6GVMH2kmaLikPkN5+rU4s7fEZyAolr
          wYfcU7Z06KwgG5TiQvPj/hvIM5jSnyas+nmeoLFRyRlfzXcLZHqbvSFQYk/adR763zDKB
          chuExwNOmVHFxmza1sktnBSSBPOdL0H/1+Ze7Hgw0kf3CIMH5rNGRiK2CmSYrngGqdT85
          GUL0dprgcjeUNQW7tvtsjzqzFBoCY6gCxmHGmA11uMwfTzro0alGUM84VlvhEk=
      COSIGN_PASSWORD: !encrypted/pkcs1-oaep
        - YfPDp83fbMWRvsTGFd40okYIxnSFlk8sCMTkaqJcCwAeww90j8joH2TL3ugqVQzWYjUpR
          L15oQ7MxyFxaMdKTSs+bW6inGJTPcMmzb1QKrTGrW8hJLauWyw1CD0TjQ12yyPTQPw8dx
          N8IxR0mKryluh9+UiLphLAewPqlP5PmhtD/Xktbi6RHtVTzUtWqTQZ2ylJifb1O16YxMN
          3t6J8Aby37Qm53/qgFW2s6hzTMCV0vGPq0SIoEW80qKZfk3GB9ZcTloBQZY+EET2cBzA5
          554g3aLH4f1hMPQDB7fGnm+E42/FPTcNRVhlzU/YB5bd+62ABtxoqxiaG3IMM1l4U7y2i
          4BZ2HFqyPes4gE717MSjfY7D2nDngVWCK2q87pcsfay3eyaxBO8i/d/cSV0a3L7BbKRqa
          s3YnFbUmpJJfPm9y4/sBlNHID5tdKXdJoWQji4MBWOokAGH5v3bcpzd2hgS8CT4idLflO
          uLZ3dC3cSSkmsT3ap1Q4PLIxVaBPOPf611XGdTZhhajwObu+6vQv4q8WT8V+eteXi3h2H
          N/8y3sEW9p28+FwfAuValtgPLD78LrLwDA/Mlyp4UTaCPAUNtMrB6uZpwcjlqw5xrcLvM
          LZgGCjsYh8Fje6d5briSxxj1bks9TMv7o6xq1NblQJDb0nLL/B3XAiNxVJKT4Q=
      COSIGN_PRIVATE_KEY: !encrypted/pkcs1-oaep
        - rmu5/FlpJht4MEMARQHUrAnPg+e+IEKiCSnCiZYjQ80v39pzNI52bIBDT/hZy6V4m4/Be
          4wSw50Iokrez8+5hh1E+5+OhvVGKdPMie+GEskI/jFjc0PssJoTDWrH8dcaSjpLhrJdkB
          C7EizLTChztnu9VilnMLDneNkbcGN4RZRMjlZrlZkRjhXDc/13kPRT0o6h5xYnOKocvER
          7s6xbp9qK0rH4gOgJuWa059nYYWdUhbNRRlvCQhQcepKc2TjR7IeFCmj6BMC6H9nRt9BI
          btcbMbcZ7b7K6LPro0FRWn7PwUSJSJjh+CHyu6sxHjIyq+7ZtDkjIfHrMI8pu18YVcebu
          nOHg2q8DpzEIjF+HGbtAKMjwbY7iDW01u+fKxs9rBnpP9rXUJXFJPsB0RD0ew6vErzOPR
          OnUcpFNFGRlVZycxrGOgWLRoscqfnrEtt17ktqd2L6fWDFP5oRDy/C/MZmlTyu65o1LFX
          BQV5r/Rs7QnuuNzNABMrPy/3+axMadhnQqHOrwNAZw6A42KAZQ7JGGTnxF0Kvmqcqfyjy
          +yusmZRJw+KkJeJThuaRibqK1XZTo9EJqcMJmA5ACmoC6gnnJCGFevF+aS5VJrHeVrky0
          VFkTIAGlazHNsgRqqS6lejx5LG/ys5dNrpVoQFVqF1Yt+SSph+VzOmFpHEmnI8=
        - JqewjhfnHTEC/ZYj5lJ+ICkjZLeUjAuLz80RGm3kKxn6APHXHdqxHevdzCRgugyGgz2s9
          ToiZ06NtPEC+/HSI3yAT4iM0LYe3uWozp2QvlYkaq5mKxfnwwUmr44WWZYugBSVi7Zg3/
          q6f+IvPXVdENDVwWjkoJNFmAim5qrygTqZmfHbuT4b6lJj3nvwaqt5SZTPRaMG9OC9urY
          LZEoTjSsca+OM0A4k8ZL3rX//0woaUi1W4qZOezPpqti1wClx4xyu0rMeHf6sdp9cbn4t
          KVURIJVfDFitczFRa/OFHOzIkRMwVKikXzczGmzifG/iPptC/ElIRVmwxe0iTx9pMwCaB
          i/Q1La24s5nxuSoEZVYkY7OYbLvDLpR4MlT3x7zq/d5vdmuvglXHc1OvvAyUKPdJvu0tQ
          9scLQ6IYeZPquzgt0Hgav6m4SPR3B1JGq/yaV2wyL52OP+Oz8ZUiXvp97TJ86wC3FbloC
          ldIGv3G6o1UJXT9RfmdjktIUgPajitdaM2wyibBG4BOXw77Z13bZeSWfeLTH1k5rDBwEC
          k8LsQt2jOTExcPu7YdDX20RIvkilWxo25ocSVuhpoFlHmMOt/gmcQlrw2x+nenFRP60qs
          ulRCIHi2x24XGZzel13jueUeS5TyWIZ8THZNOGEjvBEBjsrrXy6/MN320aqHUU=

- job:
    name: ansible-collection-commons-container-image-osism-ansible-push
    parent: abstract-container-image-osism-ansible-push
    secrets:
      - name: secret
        secret: SECRET_ANSIBLE_COLLECTION_COMMONS
        pass-to-parent: true

- job:
    name: ansible-collection-commons-osism-kubernetes-push
    parent: abstract-osism-kubernetes-push
    secrets:
      - name: secret
        secret: SECRET_ANSIBLE_COLLECTION_COMMONS
        pass-to-parent: true

- job:
    name: abstract-ansible-collection-commons-molecule
    parent: ansible-molecule
    abstract: true
    nodeset:
      nodes:
        - name: centos-9-stream
          label: centos-9-stream
        - name: debian-bookworm
          label: debian-bookworm
        - name: ubuntu-jammy
          label: ubuntu-jammy
        - name: ubuntu-noble
          label: ubuntu-noble
    vars:
      ansible_molecule_ansible_version: "11.7.0"
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-certificates
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: certificates
    files:
      - '^roles\/certificates\/.*$'
      - '^molecule\/delegated\/tests\/certificates.*$'

- job:
    name: ansible-collection-commons-molecule-cleanup
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: cleanup
    files:
      - '^roles\/cleanup\/.*$'
      - '^molecule\/delegated\/tests\/cleanup.*$'

- job:
    name: ansible-collection-commons-molecule-configfs
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: configfs
    files:
      - '^roles\/configfs\/.*$'
      - '^molecule\/delegated\/tests\/configfs.*$'

- job:
    name: ansible-collection-commons-molecule-configuration
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: configuration
    files:
      - '^roles\/configuration\/.*$'
      - '^molecule\/delegated\/tests\/configuration.*$'

- job:
    name: ansible-collection-commons-molecule-docker_compose
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: docker_compose
    files:
      - '^roles\/docker_compose\/.*$'
      - '^molecule\/delegated\/tests\/docker_compose.*$'

- job:
    name: ansible-collection-commons-molecule-docker_login
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: docker_login
    files:
      - '^roles\/docker_login\/.*$'
      - '^molecule\/delegated\/tests\/docker_login.*$'

- job:
    name: ansible-collection-commons-molecule-facts
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: facts
    files:
      - '^roles\/facts\/.*$'
      - '^molecule\/delegated\/tests\/facts.*$'

- job:
    name: ansible-collection-commons-molecule-firewall
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: firewall
    files:
      - '^roles\/firewall\/.*$'
      - '^molecule\/delegated\/tests\/firewall.*$'

- job:
    name: ansible-collection-commons-molecule-hostname
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: hostname
    files:
      - '^roles\/hostname\/.*$'
      - '^molecule\/delegated\/tests\/hostname.*$'

- job:
    name: ansible-collection-commons-molecule-hosts
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: hosts
    files:
      - '^roles\/hosts\/.*$'
      - '^molecule\/delegated\/tests\/hosts.*$'

- job:
    name: ansible-collection-commons-molecule-ipmitool
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: ipmitool
    files:
      - '^roles\/ipimtool\/.*$'
      - '^molecule\/delegated\/tests\/ipmitool.*$'

- job:
    name: ansible-collection-commons-molecule-kernel_modules
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: kernel_modules
    files:
      - '^roles\/kernel_modules\/.*$'
      - '^molecule\/delegated\/tests\/kernel_modules.*$'

- job:
    name: ansible-collection-commons-molecule-known_hosts
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: known_hosts
    files:
      - '^roles\/known_hosts\/.*$'
      - '^molecule\/delegated\/tests\/known_hosts.*$'

- job:
    name: ansible-collection-commons-molecule-limits
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: limits
    files:
      - '^roles\/limits\/.*$'
      - '^molecule\/delegated\/tests\/limits.*$'

- job:
    name: ansible-collection-commons-molecule-lynis
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: lynis
    files:
      - '^roles\/lynis\/.*$'
      - '^molecule\/delegated\/tests\/lynis.*$'

- job:
    name: ansible-collection-commons-molecule-microcode
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: microcode
    files:
      - '^roles\/microcode\/.*$'
      - '^molecule\/delegated\/tests\/microcode.*$'

- job:
    name: ansible-collection-commons-molecule-motd
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: motd
    files:
      - '^roles\/motd\/.*$'
      - '^molecule\/delegated\/tests\/motd.*$'

- job:
    name: ansible-collection-commons-molecule-network
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: network
    files:
      - '^roles\/network\/.*$'
      - '^molecule\/delegated\/tests\/network.*$'

- job:
    name: ansible-collection-commons-molecule-operator
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: operator
    files:
      - '^roles\/operator\/.*$'
      - '^molecule\/delegated\/tests\/operator.*$'

- job:
    name: ansible-collection-commons-molecule-packages
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: packages
    files:
      - '^roles\/packages\/.*$'
      - '^molecule\/delegated\/tests\/packages.*$'

- job:
    name: ansible-collection-commons-molecule-podman
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: podman
    files:
      - '^roles\/podman\/.*$'
      - '^molecule\/delegated\/tests\/podman.*$'

- job:
    name: ansible-collection-commons-molecule-proxy
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: proxy
    files:
      - '^roles\/proxy\/.*$'
      - '^molecule\/delegated\/tests\/proxy.*$'

- job:
    name: ansible-collection-commons-molecule-repository
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: repository
    files:
      - '^roles\/repository\/.*$'
      - '^molecule\/delegated\/tests\/repository.*$'

- job:
    name: ansible-collection-commons-molecule-resolvconf
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: resolvconf
    files:
      - '^roles\/resolvconf\/.*$'
      - '^molecule\/delegated\/tests\/resolvconf.*$'

- job:
    name: ansible-collection-commons-molecule-runc
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: runc
    files:
      - '^roles\/runc\/.*$'
      - '^molecule\/delegated\/tests\/runc.*$'

- job:
    name: ansible-collection-commons-molecule-services
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: services
    files:
      - '^roles\/services\/.*$'
      - '^molecule\/delegated\/tests\/services.*$'

- job:
    name: ansible-collection-commons-molecule-sosreport
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: sosreport
    files:
      - '^roles\/sosreport\/.*$'
      - '^molecule\/delegated\/tests\/sosreport.*$'

- job:
    name: ansible-collection-commons-molecule-sshconfig
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: sshconfig
    files:
      - '^roles\/sshconfig\/.*$'
      - '^molecule\/delegated\/tests\/sshconfig.*$'

- job:
    name: ansible-collection-commons-molecule-state
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: state
    files:
      - '^roles\/state\/.*$'
      - '^molecule\/delegated\/tests\/state.*$'

- job:
    name: ansible-collection-commons-molecule-sysctl
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: sysctl
    files:
      - '^roles\/sysctl\/.*$'
      - '^molecule\/delegated\/tests\/sysctl.*$'

- job:
    name: ansible-collection-commons-molecule-systohc
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: systohc
    files:
      - '^roles\/systohc\/.*$'
      - '^molecule\/delegated\/tests\/systohc.*$'

- job:
    name: ansible-collection-commons-molecule-timezone
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: timezone
    files:
      - '^roles\/timezone\/.*$'
      - '^molecule\/delegated\/tests\/timezone.*$'

- job:
    name: ansible-collection-commons-molecule-trivy
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: trivy
    files:
      - '^roles\/trivy\/.*$'
      - '^molecule\/delegated\/tests\/trivy.*$'

- job:
    name: ansible-collection-commons-molecule-user
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: user
    files:
      - '^roles\/user\/.*$'
      - '^molecule\/delegated\/tests\/user.*$'

- project:
    merge-mode: squash-merge
    default-branch: main
    check:
      jobs:
        - ansible-collection-commons-molecule-certificates
        - ansible-collection-commons-molecule-cleanup
        - ansible-collection-commons-molecule-configfs
        - ansible-collection-commons-molecule-configuration
        - ansible-collection-commons-molecule-docker_compose
        - ansible-collection-commons-molecule-docker_login
        - ansible-collection-commons-molecule-facts
        - ansible-collection-commons-molecule-firewall
        - ansible-collection-commons-molecule-hostname
        - ansible-collection-commons-molecule-hosts
        - ansible-collection-commons-molecule-ipmitool
        - ansible-collection-commons-molecule-kernel_modules
        - ansible-collection-commons-molecule-known_hosts
        - ansible-collection-commons-molecule-limits
        - ansible-collection-commons-molecule-lynis
        - ansible-collection-commons-molecule-microcode
        - ansible-collection-commons-molecule-motd
        - ansible-collection-commons-molecule-network
        - ansible-collection-commons-molecule-operator
        - ansible-collection-commons-molecule-packages
        - ansible-collection-commons-molecule-podman
        - ansible-collection-commons-molecule-proxy
        - ansible-collection-commons-molecule-repository
        - ansible-collection-commons-molecule-resolvconf
        - ansible-collection-commons-molecule-runc
        - ansible-collection-commons-molecule-services
        - ansible-collection-commons-molecule-sosreport
        - ansible-collection-commons-molecule-sshconfig
        - ansible-collection-commons-molecule-state
        - ansible-collection-commons-molecule-sysctl
        - ansible-collection-commons-molecule-systohc
        - ansible-collection-commons-molecule-timezone
        - ansible-collection-commons-molecule-trivy
        - ansible-collection-commons-molecule-user
        - ansible-collection-ensure-readme
        - ansible-lint
        - flake8
        - yamllint
        - python-black
    periodic-daily:
      jobs:
        - yamllint
        - ansible-lint
        - python-black
    post:
      jobs:
        - ansible-collection-commons-container-image-osism-ansible-push:
            branches: main
        - ansible-collection-commons-osism-kubernetes-push:
            branches: main
