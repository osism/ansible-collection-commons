---
- secret:
    name: SECRET_ANSIBLE_COLLECTION_COMMONS
    data:
      DOCKER_USERNAME: !encrypted/pkcs1-oaep
        - dvrY/5AA4L9zNJ4BWvPscJYLtlnWLIRo41oQdQNUaJGUWiF8mzMnHdeYG4Hg42cBAy+yk
          SQLsAKJ6g24I43H80PRSCodYVJqqUnW1gIsOaCHAGkGtHnykBKKLZdKBC66qslABx/KMM
          KSGLoUBl8VbimdNAS7uwzdNLrAXWBzUN2aPHe2aRtjCOdGIVa40/jHU+upxKjD+1x6cJ6
          n3ws7YnovD1bf4DCuoOlSwSGwKxall+CRPib1tn/MpZ6RfrkyXZihaM07MFD9HAVSlrli
          MH7pensjKX3/uZ+0OYkJjw2zGI4BJcEcq9NkiM1dRTXg9yEWGbiutG2I5VbFwVQ7tlkRU
          2ji4MFOyOl7HGUiJqC0poQ4iR54a4/18IbNsgCzuLEMOQFTcmpHoi6e959JGWcFNi+AVx
          GJmpgSg2sabFS5mg/NddHs8wy46WTZCTdMXE62YuSro/4DUwWGpFBTOMIc11akWI/Il5T
          E4sWznyqOXMM7MSOWYe4wU0wiTGFoOJyqRst8nfZ8zHRlR0o5wj0DjCXXe5nxO1D7H5yZ
          UJB39oWHc7UaRnY8qa7hWXzMUkoQydZILIMGjD0vEj6CQ9pH5pe2J8QFVfjErbT9wJ+PJ
          V0lUJ1SeXMzwU4FRJHHtQEwUPlng0iTW02i9NUXkVIzcOBfbJxuhai1oubByck=
      DOCKER_PASSWORD: !encrypted/pkcs1-oaep
        - aLUSm9C+7QFwqcnHsWE+h9tOWgQ0XvlqfnMNKTAHagfalG3TGElPw3JLm17tdRAJLLgYZ
          RFcUrjhs7cb1mstcKnpeZl2fKA5WvmhnHpvaK/kYvWZhz+aP/3ywNHYLF9PyLHRthoyp3
          Kyjex6g2ENoyQlVky5wXnEJlvt1geKxrdCPIiaD0JLXZ9HD2OB729krkTNjXVeuQ0igTH
          JCj0n35LOw18O5l7sDKA3pKOvvcNMzFx+JIt109ZwiW0tAgI7HydBsHezKyuw2rTjE+Aj
          yYyeb6uLbKf+5fVVSnMGxVwpPSSXs9T8JY0Z6JqRzJjLddzxAAyzCfPUqY7PA8C9FEBCC
          754WyFLrmxcPunaIlrwnyKK7L8rxicqI3S+5Dd/ZbjSbmpSXaTu6H7jfRRWID5qbnxtP1
          lV55gRtS1W8+NS8I8IDTG8kWeO6qxGwR/xcuef0lUkLqFjQvXhaDeI2QlUs0PMZDbcj1M
          BN/awy6t5V5/QX13bTdNZBj+qy9sF2JmlhJ5+CUXy3wSNLBK0QpsXBECmCjBN3YaVWxdz
          PJdduJ0NPX9nRAjjDSWSx6YQJ87PPpwi+Tkk05ALknoG49uq/56mbvwEl8r/BlgqiAOTp
          Eefjzo74VBq3iJwEwXn78AsbQ9qTwcJXZzatnC7+061H0tFZ3d12qZtva0qPfY=

- job:
    name: ansible-collection-commons-container-image-osism-ansible-push
    parent: abstract-container-image-osism-ansible-push
    secrets:
      - name: secret
        secret: SECRET_ANSIBLE_COLLECTION_COMMONS
        pass-to-parent: true

- job:
    name: ansible-collection-commons-molecule-certificates
    parent: ansible-molecule
    vars:
      ansible_role: certificates
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/certificates\/.*$'
      - '^molecule\/delegated\/tests\/certificates.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-cleanup
    parent: ansible-molecule
    vars:
      ansible_role: cleanup
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/cleanup\/.*$'
      - '^molecule\/delegated\/tests\/cleanup.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-configfs
    parent: ansible-molecule
    vars:
      ansible_role: configfs
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/configfs\/.*$'
      - '^molecule\/delegated\/tests\/configfs.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-configuration
    parent: ansible-molecule
    vars:
      ansible_role: configuration
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/configuraion\/.*$'
      - '^molecule\/delegated\/tests\/configuration.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-docker_compose
    parent: ansible-molecule
    vars:
      ansible_role: docker_compose
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/docker_compose\/.*$'
      - '^molecule\/delegated\/tests\/docker_compose.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-docker_login
    parent: ansible-molecule
    vars:
      ansible_role: docker_login
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/docker_login\/.*$'
      - '^molecule\/delegated\/tests\/docker_login.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-facts
    parent: ansible-molecule
    vars:
      ansible_role: facts
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/facts\/.*$'
      - '^molecule\/delegated\/tests\/facts.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-firewall
    parent: ansible-molecule
    vars:
      ansible_role: firewall
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/firewall\/.*$'
      - '^molecule\/delegated\/tests\/firewall.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-hostname
    parent: ansible-molecule
    vars:
      ansible_role: hostname
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/hostname\/.*$'
      - '^molecule\/delegated\/tests\/hostname.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-hosts
    parent: ansible-molecule
    vars:
      ansible_role: hosts
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/hosts\/.*$'
      - '^molecule\/delegated\/tests\/hosts.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-ipmitool
    parent: ansible-molecule
    vars:
      ansible_role: ipmitool
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/ipimtool\/.*$'
      - '^molecule\/delegated\/tests\/ipmitool.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-kernel_modules
    parent: ansible-molecule
    vars:
      ansible_role: kernel_modules
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/kernel_modules\/.*$'
      - '^molecule\/delegated\/tests\/kernel_modules.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-known_hosts
    parent: ansible-molecule
    vars:
      ansible_role: known_hosts
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/known_hosts\/.*$'
      - '^molecule\/delegated\/tests\/known_hosts.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-kompose
    parent: ansible-molecule
    vars:
      ansible_role: kompose
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/kompose\/.*$'
      - '^molecule\/delegated\/tests\/kompose.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-kubectl
    parent: ansible-molecule
    vars:
      ansible_role: kubectl
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/kubectl\/.*$'
      - '^molecule\/delegated\/tests\/kubectl.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-limits
    parent: ansible-molecule
    vars:
      ansible_role: limits
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/limits\/.*$'
      - '^molecule\/delegated\/tests\/limits.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-lynis
    parent: ansible-molecule
    vars:
      ansible_role: lynis
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/lynis\/.*$'
      - '^molecule\/delegated\/tests\/lynis.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-microcode
    parent: ansible-molecule
    vars:
      ansible_role: microcode
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/microcode\/.*$'
      - '^molecule\/delegated\/tests\/microcode.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-motd
    parent: ansible-molecule
    vars:
      ansible_role: motd
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/motd\/.*$'
      - '^molecule\/delegated\/tests\/motd.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-operator
    parent: ansible-molecule
    vars:
      ansible_role: operator
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/operator\/.*$'
      - '^molecule\/delegated\/tests\/operator.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-packages
    parent: ansible-molecule
    vars:
      ansible_role: packages
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/packages\/.*$'
      - '^molecule\/delegated\/tests\/packages.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-podman
    parent: ansible-molecule
    vars:
      ansible_role: podman
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/podman\/.*$'
      - '^molecule\/delegated\/tests\/podman.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-proxy
    parent: ansible-molecule
    vars:
      ansible_role: proxy
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/proxy\/.*$'
      - '^molecule\/delegated\/tests\/proxy.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-repository
    parent: ansible-molecule
    vars:
      ansible_role: repository
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/repository\/.*$'
      - '^molecule\/delegated\/tests\/repository.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-resolvconf
    parent: ansible-molecule
    vars:
      ansible_role: resolvconf
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/resolvconf\/.*$'
      - '^molecule\/delegated\/tests\/resolvconf.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-runc
    parent: ansible-molecule
    vars:
      ansible_role: runc
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/runc\/.*$'
      - '^molecule\/delegated\/tests\/runc.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-services
    parent: ansible-molecule
    vars:
      ansible_role: services
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/services\/.*$'
      - '^molecule\/delegated\/tests\/services.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-sosreport
    parent: ansible-molecule
    vars:
      ansible_role: sosreport
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/sosreport\/.*$'
      - '^molecule\/delegated\/tests\/sosreport.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-sshconfig
    parent: ansible-molecule
    vars:
      ansible_role: sshconfig
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/sshconfig\/.*$'
      - '^molecule\/delegated\/tests\/sshconfig.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-state
    parent: ansible-molecule
    vars:
      ansible_role: state
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/state\/.*$'
      - '^molecule\/delegated\/tests\/state.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-sysctl
    parent: ansible-molecule
    vars:
      ansible_role: sysctl
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/sysctl\/.*$'
      - '^molecule\/delegated\/tests\/sysctl.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-systohc
    parent: ansible-molecule
    vars:
      ansible_role: systohc
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/systohc\/.*$'
      - '^molecule\/delegated\/tests\/systohc.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-timezone
    parent: ansible-molecule
    vars:
      ansible_role: timezone
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/timezone\/.*$'
      - '^molecule\/delegated\/tests\/timezone.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- job:
    name: ansible-collection-commons-molecule-trivy
    parent: ansible-molecule
    vars:
      ansible_role: trivy
      ansible_molecule_ansible_version: "9.2.0"
    files:
      - '^roles\/trivy\/.*$'
      - '^molecule\/delegated\/tests\/trivy.*$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'

- project:
    merge-mode: squash-merge
    default-branch: main
    check:
      jobs:
        - ansible-collection-commons-molecule-certificates
        - ansible-collection-commons-molecule-cleanup
        - ansible-collection-commons-molecule-configfs
        - ansible-collection-commons-molecule-configuration
        - ansible-collection-commons-molecule-docker_compose
        - ansible-collection-commons-molecule-docker_login
        - ansible-collection-commons-molecule-facts
        - ansible-collection-commons-molecule-firewall
        - ansible-collection-commons-molecule-hostname
        - ansible-collection-commons-molecule-hosts
        - ansible-collection-commons-molecule-ipmitool
        - ansible-collection-commons-molecule-kernel_modules
        - ansible-collection-commons-molecule-known_hosts
        - ansible-collection-commons-molecule-kompose
        - ansible-collection-commons-molecule-kubectl
        - ansible-collection-commons-molecule-limits
        - ansible-collection-commons-molecule-lynis
        - ansible-collection-commons-molecule-microcode
        - ansible-collection-commons-molecule-motd
        - ansible-collection-commons-molecule-operator
        - ansible-collection-commons-molecule-packages
        - ansible-collection-commons-molecule-podman
        - ansible-collection-commons-molecule-proxy
        - ansible-collection-commons-molecule-repository
        - ansible-collection-commons-molecule-resolvconf
        - ansible-collection-commons-molecule-runc
        - ansible-collection-commons-molecule-services
        - ansible-collection-commons-molecule-sosreport
        - ansible-collection-commons-molecule-sshconfig
        - ansible-collection-commons-molecule-state
        - ansible-collection-commons-molecule-sysctl
        - ansible-collection-commons-molecule-systohc
        - ansible-collection-commons-molecule-timezone
        - ansible-collection-commons-molecule-trivy
        - ansible-lint
        - flake8
        - yamllint
        - python-black
    gate:
      jobs:
        - ansible-collection-commons-molecule-certificates
        - ansible-collection-commons-molecule-cleanup
        - ansible-collection-commons-molecule-configfs
        - ansible-collection-commons-molecule-configuration
        - ansible-collection-commons-molecule-docker_compose
        - ansible-collection-commons-molecule-docker_login
        - ansible-collection-commons-molecule-facts
        - ansible-collection-commons-molecule-firewall
        - ansible-collection-commons-molecule-hostname
        - ansible-collection-commons-molecule-hosts
        - ansible-collection-commons-molecule-ipmitool
        - ansible-collection-commons-molecule-kernel_modules
        - ansible-collection-commons-molecule-known_hosts
        - ansible-collection-commons-molecule-kompose
        - ansible-collection-commons-molecule-kubectl
        - ansible-collection-commons-molecule-limits
        - ansible-collection-commons-molecule-lynis
        - ansible-collection-commons-molecule-microcode
        - ansible-collection-commons-molecule-motd
        - ansible-collection-commons-molecule-operator
        - ansible-collection-commons-molecule-packages
        - ansible-collection-commons-molecule-podman
        - ansible-collection-commons-molecule-proxy
        - ansible-collection-commons-molecule-repository
        - ansible-collection-commons-molecule-resolvconf
        - ansible-collection-commons-molecule-runc
        - ansible-collection-commons-molecule-services
        - ansible-collection-commons-molecule-sosreport
        - ansible-collection-commons-molecule-sshconfig
        - ansible-collection-commons-molecule-state
        - ansible-collection-commons-molecule-sysctl
        - ansible-collection-commons-molecule-systohc
        - ansible-collection-commons-molecule-timezone
        - ansible-collection-commons-molecule-trivy
        - ansible-lint
        - flake8
        - yamllint
        - python-black
    periodic-daily:
      jobs:
        - yamllint
        - ansible-lint
        - python-black
    post:
      jobs:
        - ansible-collection-commons-container-image-osism-ansible-push:
            branches: main
