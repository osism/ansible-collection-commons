---
- secret:
    name: SECRET_ANSIBLE_COLLECTION_COMMONS
    data:
      DOCKER_USERNAME: !encrypted/pkcs1-oaep
        - dvrY/5AA4L9zNJ4BWvPscJYLtlnWLIRo41oQdQNUaJGUWiF8mzMnHdeYG4Hg42cBAy+yk
          SQLsAKJ6g24I43H80PRSCodYVJqqUnW1gIsOaCHAGkGtHnykBKKLZdKBC66qslABx/KMM
          KSGLoUBl8VbimdNAS7uwzdNLrAXWBzUN2aPHe2aRtjCOdGIVa40/jHU+upxKjD+1x6cJ6
          n3ws7YnovD1bf4DCuoOlSwSGwKxall+CRPib1tn/MpZ6RfrkyXZihaM07MFD9HAVSlrli
          MH7pensjKX3/uZ+0OYkJjw2zGI4BJcEcq9NkiM1dRTXg9yEWGbiutG2I5VbFwVQ7tlkRU
          2ji4MFOyOl7HGUiJqC0poQ4iR54a4/18IbNsgCzuLEMOQFTcmpHoi6e959JGWcFNi+AVx
          GJmpgSg2sabFS5mg/NddHs8wy46WTZCTdMXE62YuSro/4DUwWGpFBTOMIc11akWI/Il5T
          E4sWznyqOXMM7MSOWYe4wU0wiTGFoOJyqRst8nfZ8zHRlR0o5wj0DjCXXe5nxO1D7H5yZ
          UJB39oWHc7UaRnY8qa7hWXzMUkoQydZILIMGjD0vEj6CQ9pH5pe2J8QFVfjErbT9wJ+PJ
          V0lUJ1SeXMzwU4FRJHHtQEwUPlng0iTW02i9NUXkVIzcOBfbJxuhai1oubByck=
      DOCKER_PASSWORD: !encrypted/pkcs1-oaep
        - aLUSm9C+7QFwqcnHsWE+h9tOWgQ0XvlqfnMNKTAHagfalG3TGElPw3JLm17tdRAJLLgYZ
          RFcUrjhs7cb1mstcKnpeZl2fKA5WvmhnHpvaK/kYvWZhz+aP/3ywNHYLF9PyLHRthoyp3
          Kyjex6g2ENoyQlVky5wXnEJlvt1geKxrdCPIiaD0JLXZ9HD2OB729krkTNjXVeuQ0igTH
          JCj0n35LOw18O5l7sDKA3pKOvvcNMzFx+JIt109ZwiW0tAgI7HydBsHezKyuw2rTjE+Aj
          yYyeb6uLbKf+5fVVSnMGxVwpPSSXs9T8JY0Z6JqRzJjLddzxAAyzCfPUqY7PA8C9FEBCC
          754WyFLrmxcPunaIlrwnyKK7L8rxicqI3S+5Dd/ZbjSbmpSXaTu6H7jfRRWID5qbnxtP1
          lV55gRtS1W8+NS8I8IDTG8kWeO6qxGwR/xcuef0lUkLqFjQvXhaDeI2QlUs0PMZDbcj1M
          BN/awy6t5V5/QX13bTdNZBj+qy9sF2JmlhJ5+CUXy3wSNLBK0QpsXBECmCjBN3YaVWxdz
          PJdduJ0NPX9nRAjjDSWSx6YQJ87PPpwi+Tkk05ALknoG49uq/56mbvwEl8r/BlgqiAOTp
          Eefjzo74VBq3iJwEwXn78AsbQ9qTwcJXZzatnC7+061H0tFZ3d12qZtva0qPfY=

- job:
    name: ansible-collection-commons-container-image-osism-ansible-push
    parent: abstract-container-image-osism-ansible-push
    secrets:
      - name: secret
        secret: SECRET_ANSIBLE_COLLECTION_COMMONS
        pass-to-parent: true

- job:
    name: abstract-ansible-collection-commons-molecule
    parent: ansible-molecule
    abstract: true
    nodeset:
      nodes:
        - name: centos-9-stream
          label: centos-9-stream
        - name: debian-bookworm
          label: debian-bookworm
        - name: ubuntu-jammy-large
          label: ubuntu-jammy-large
    vars:
      ansible_molecule_ansible_version: "9.4.0"

- job:
    name: ansible-collection-commons-molecule-certificates
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: certificates
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/certificates\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/certificates.*$'

- job:
    name: ansible-collection-commons-molecule-cleanup
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: cleanup
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/cleanup\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/cleanup.*$'

- job:
    name: ansible-collection-commons-molecule-configfs
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: configfs
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/configfs\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/configfs.*$'

- job:
    name: ansible-collection-commons-molecule-configuration
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: configuration
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/configuration\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/configuration.*$'

- job:
    name: ansible-collection-commons-molecule-docker_compose
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: docker_compose
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/docker_compose\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/docker_compose.*$'

- job:
    name: ansible-collection-commons-molecule-docker_login
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: docker_login
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/docker_login\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/docker_login.*$'

- job:
    name: ansible-collection-commons-molecule-facts
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: facts
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/facts\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/facts.*$'

- job:
    name: ansible-collection-commons-molecule-firewall
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: firewall
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/firewall\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/firewall.*$'

- job:
    name: ansible-collection-commons-molecule-hostname
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: hostname
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/hostname\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/hostname.*$'

- job:
    name: ansible-collection-commons-molecule-hosts
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: hosts
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/hosts\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/hosts.*$'

- job:
    name: ansible-collection-commons-molecule-ipmitool
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: ipmitool
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/ipimtool\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/ipmitool.*$'

- job:
    name: ansible-collection-commons-molecule-kernel_modules
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: kernel_modules
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/kernel_modules\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/kernel_modules.*$'

- job:
    name: ansible-collection-commons-molecule-known_hosts
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: known_hosts
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/known_hosts\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/known_hosts.*$'

- job:
    name: ansible-collection-commons-molecule-kompose
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: kompose
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/kompose\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/kompose.*$'

- job:
    name: ansible-collection-commons-molecule-kubectl
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: kubectl
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/kubectl\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/kubectl.*$'

- job:
    name: ansible-collection-commons-molecule-limits
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: limits
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/limits\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/limits.*$'

- job:
    name: ansible-collection-commons-molecule-lynis
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: lynis
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/lynis\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/lynis.*$'

- job:
    name: ansible-collection-commons-molecule-microcode
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: microcode
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/microcode\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/microcode.*$'

- job:
    name: ansible-collection-commons-molecule-motd
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: motd
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/motd\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/motd.*$'

- job:
    name: ansible-collection-commons-molecule-network
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: network
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/network\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/network.*$'

- job:
    name: ansible-collection-commons-molecule-operator
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: operator
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/operator\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/operator.*$'

- job:
    name: ansible-collection-commons-molecule-packages
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: packages
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/packages\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/packages.*$'

- job:
    name: ansible-collection-commons-molecule-podman
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: podman
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/podman\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/podman.*$'

- job:
    name: ansible-collection-commons-molecule-proxy
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: proxy
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/proxy\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/proxy.*$'

- job:
    name: ansible-collection-commons-molecule-repository
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: repository
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/repository\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/repository.*$'

- job:
    name: ansible-collection-commons-molecule-resolvconf
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: resolvconf
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/resolvconf\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/resolvconf.*$'

- job:
    name: ansible-collection-commons-molecule-runc
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: runc
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/runc\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/runc.*$'

- job:
    name: ansible-collection-commons-molecule-services
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: services
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/services\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/services.*$'

- job:
    name: ansible-collection-commons-molecule-sosreport
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: sosreport
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/sosreport\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/sosreport.*$'

- job:
    name: ansible-collection-commons-molecule-sshconfig
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: sshconfig
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/sshconfig\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/sshconfig.*$'

- job:
    name: ansible-collection-commons-molecule-state
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: state
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/state\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/state.*$'

- job:
    name: ansible-collection-commons-molecule-sysctl
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: sysctl
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/sysctl\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/sysctl.*$'

- job:
    name: ansible-collection-commons-molecule-systohc
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: systohc
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/systohc\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/systohc.*$'

- job:
    name: ansible-collection-commons-molecule-timezone
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: timezone
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/timezone\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/timezone.*$'

- job:
    name: ansible-collection-commons-molecule-trivy
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: trivy
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/trivy\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/trivy.*$'

- job:
    name: ansible-collection-commons-molecule-user
    parent: abstract-ansible-collection-commons-molecule
    vars:
      ansible_role: user
    files:
      - '^\.zuul\.yaml$'
      - '^molecule\/delegated\/[^\/]*yml$'
      - '^molecule\/requirements\.txt$'
      - '^roles\/user\/.*$'
      - '^molecule\/delegated\/[a-zA-Z0-9_-]+\/user.*$'

- project:
    merge-mode: squash-merge
    default-branch: main
    check:
      jobs:
        - ansible-collection-commons-molecule-certificates
        - ansible-collection-commons-molecule-cleanup
        - ansible-collection-commons-molecule-configfs
        - ansible-collection-commons-molecule-configuration
        - ansible-collection-commons-molecule-docker_compose
        - ansible-collection-commons-molecule-docker_login
        - ansible-collection-commons-molecule-facts
        - ansible-collection-commons-molecule-firewall
        - ansible-collection-commons-molecule-hostname
        - ansible-collection-commons-molecule-hosts
        - ansible-collection-commons-molecule-ipmitool
        - ansible-collection-commons-molecule-kernel_modules
        - ansible-collection-commons-molecule-known_hosts
        - ansible-collection-commons-molecule-kompose
        - ansible-collection-commons-molecule-kubectl
        - ansible-collection-commons-molecule-limits
        - ansible-collection-commons-molecule-lynis
        - ansible-collection-commons-molecule-microcode
        - ansible-collection-commons-molecule-motd
        - ansible-collection-commons-molecule-network
        - ansible-collection-commons-molecule-operator
        - ansible-collection-commons-molecule-packages
        - ansible-collection-commons-molecule-podman
        - ansible-collection-commons-molecule-proxy
        - ansible-collection-commons-molecule-repository
        - ansible-collection-commons-molecule-resolvconf
        - ansible-collection-commons-molecule-runc
        - ansible-collection-commons-molecule-services
        - ansible-collection-commons-molecule-sosreport
        - ansible-collection-commons-molecule-sshconfig
        - ansible-collection-commons-molecule-state
        - ansible-collection-commons-molecule-sysctl
        - ansible-collection-commons-molecule-systohc
        - ansible-collection-commons-molecule-timezone
        - ansible-collection-commons-molecule-trivy
        - ansible-collection-commons-molecule-user
        - ansible-lint
        - flake8
        - yamllint
        - python-black
    gate:
      jobs:
        - ansible-collection-commons-molecule-certificates
        - ansible-collection-commons-molecule-cleanup
        - ansible-collection-commons-molecule-configfs
        - ansible-collection-commons-molecule-configuration
        - ansible-collection-commons-molecule-docker_compose
        - ansible-collection-commons-molecule-docker_login
        - ansible-collection-commons-molecule-facts
        - ansible-collection-commons-molecule-firewall
        - ansible-collection-commons-molecule-hostname
        - ansible-collection-commons-molecule-hosts
        - ansible-collection-commons-molecule-ipmitool
        - ansible-collection-commons-molecule-kernel_modules
        - ansible-collection-commons-molecule-known_hosts
        - ansible-collection-commons-molecule-kompose
        - ansible-collection-commons-molecule-kubectl
        - ansible-collection-commons-molecule-limits
        - ansible-collection-commons-molecule-lynis
        - ansible-collection-commons-molecule-microcode
        - ansible-collection-commons-molecule-motd
        - ansible-collection-commons-molecule-network
        - ansible-collection-commons-molecule-operator
        - ansible-collection-commons-molecule-packages
        - ansible-collection-commons-molecule-podman
        - ansible-collection-commons-molecule-proxy
        - ansible-collection-commons-molecule-repository
        - ansible-collection-commons-molecule-resolvconf
        - ansible-collection-commons-molecule-runc
        - ansible-collection-commons-molecule-services
        - ansible-collection-commons-molecule-sosreport
        - ansible-collection-commons-molecule-sshconfig
        - ansible-collection-commons-molecule-state
        - ansible-collection-commons-molecule-sysctl
        - ansible-collection-commons-molecule-systohc
        - ansible-collection-commons-molecule-timezone
        - ansible-collection-commons-molecule-trivy
        - ansible-collection-commons-molecule-user
        - ansible-lint
        - flake8
        - yamllint
        - python-black
    periodic-daily:
      jobs:
        - yamllint
        - ansible-lint
        - python-black
    post:
      jobs:
        - ansible-collection-commons-container-image-osism-ansible-push:
            branches: main
